<?xml version="1.0" encoding="UTF-8"?>
<Prompts>

    <Prompt type="LlmPrompt">
        <Id>DefaultPrompt1</Id>
        <Title>Explain Selected Query</Title>
        <Description>Explains complex logic. Breaks down the query execution flow.</Description>
<Text>Act as an expert SQL instructor.
Analyze the following SQL query and explain how it works step-by-step.
Break down the logic (joins, filters, aggregations).
Explain the business intent (what question is this query answering?).
Use simple, non-technical language where possible.

Query:
{{selected_sql}}
</Text>
        <Placeholders>
            <Placeholder name="selected_sql" />
        </Placeholders>
        <Metadata>
            <Category>Refactor</Category>
        </Metadata>
    </Prompt>

    <Prompt type="LlmPrompt">
        <Id>DefaultPrompt2</Id>
        <Title>Optimize and Analyze Performance</Title>
        <Description>Detailed performance suggestions</Description>
<Text>You are a Senior Database Performance Engineer.
Analyze the selected SQL query for potential performance bottlenecks.
Identify any inefficient operations (e.g., full table scans, N+1 problems, misuse of functions in WHERE clauses).
Suggest specific indices that would improve performance.
Provide a refactored version of the query that is more efficient.

Query:
{{selected_sql}}
</Text>
        <Placeholders>
            <Placeholder name="selected_sql" />
        </Placeholders>
        <Metadata>
            <Category>Refactor</Category>
        </Metadata>
    </Prompt>

    <Prompt type="LlmPrompt">
        <Id>DefaultPrompt3</Id>
        <Title>Fix syntax or logic error</Title>
        <Description>Diagnoses errors based on user input and selected SQL</Description>
<Text>You are a Senior Database Administrator.
Analyze the provided SQL query and the associated error message to diagnose the root cause.
Provide the corrected SQL query that resolves the specific error described.
Query:
{{selected_sql}}
Error Message:
{{error_message}}
</Text>
        <Placeholders>
            <Placeholder name="selected_sql" />
            <Placeholder name="error_message" editable="true" rich="true"/>
        </Placeholders>
        <Metadata>
            <Category>Refactor</Category>
        </Metadata>
    </Prompt>

    <Prompt type="LlmPrompt">
        <Id>DefaultPrompt4</Id>
        <Title>Convert SQL dialect</Title>
        <Description>Migrates code between systems (e.g. Access to PostgreSQL)</Description>
<Text>You are a SQL Migration Specialist.
Convert the following SQL query from {{source_dialect}} to {{target_dialect}}.
Ensure that function names, quote escaping, and specific clauses (like LIMIT vs TOP) are adapted correctly for the target environment.
Original SQL:
{{selected_sql}}
</Text>
        <Placeholders>
            <Placeholder name="selected_sql" />
            <Placeholder name="source_dialect" editable="true"/>
            <Placeholder name="target_dialect" editable="true"/>
        </Placeholders>
        <Metadata>
            <Category>Refactor</Category>
        </Metadata>
    </Prompt>

    <Prompt type="LlmPrompt">
        <Id>DefaultPrompt5</Id>
        <Title>Generate documentation</Title>
        <Description>Creates technical docs</Description>
<Text>
You are a Technical Writer specializing in databases.
Generate technical documentation for the selected SQL query in {{format}} format.
Include a title, a description of the logic, a list of input parameters, and a summary of the tables involved.
Query:
{{selected_sql}}</Text>
        <Placeholders>
            <Placeholder name="selected_sql" />
            <Placeholder name="format" editable="true"/>
        </Placeholders>
        <Metadata>
            <Category>Generate</Category>
        </Metadata>
    </Prompt>

    <Prompt type="LlmPrompt">
        <Id>DefaultPrompt9</Id>
        <Title>Generate Table from description</Title>
        <Description>Writes CREATE TABLE SQL based on natural language requirements</Description>
<Text>You are a Database Architect.
Write a valid SQL CREATE TABLE statement that fulfills the requirement described below.
Ensure you include primary keys, appropriate data types, and constraints for the target dialect {{dialect}}.
Requirement:
{{user_input}}
</Text>
        <Placeholders>
            <Placeholder name="dialect" editable="true"/>
            <Placeholder name="user_input" editable="true" rich="true"/>
        </Placeholders>
        <Metadata>
            <Category>Generate</Category>
        </Metadata>
    </Prompt>

</Prompts>
